<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        .px1{
            
            margin-top: 30px;
            margin-left: 560px;
            background: #CCCCCC;
           height: 350px;
           width: 450px;
            position: relative;
            
            
        }

    </style>
</head>
<body>

                <center>
    
                <div id="updatename">
                    <th>Name</th>
                    <td><input type="text" name="fname" id="fname" oninput="addnq()"></td>
                </div>
                <br>
                <br>
            
                <div id="updateq">
                    <th>Qualification</th>
                    <td><input type="text" name="fq" id="fq" oninput="addnq()"></td>
                </div>
                <br>
                <br>
                <div id="hobbie">
                    <th>Hobbie</th>
                    <br>
                    <br>
                    </div>
                </div>  
                <br>
                <br>
                <tr  id="btna">
                    <td><input type="button" name="button" id="btn" value="Add Hobbies" onclick="addrow(0)"></td>

                </tr>
                </center>
            
    <div class="px1">
    <div id="header">
     <p>I, ______, would like to apply for an internship at your organisation.<br>
        My Qualification is __________.</p><br>
    </div>
    <div id="body">
    
        <p>My hobbies are ______, ________ & __________.</p><br>
    </div>
    <div id="footer">
        Thanking you,<br>
        Your Sincerely<br>
        _____________</p>
    </div>
    </div>

    <script>


        var arr=[];

        function addhobbies(additioncounter){
            var  additionid = "fh"+additioncounter;
            var  hobbie = document.getElementById(additionid).value;
            arr[additioncounter-1]=hobbie;
            display();

        }
       
      
        
        function addnq(){
            var body1="";
            var name = document.getElementById('fname').value;
            var qualification = document.getElementById('fq').value;
            var header = document.getElementById('header');
            var footer = document.getElementById('footer');
         
          header.innerHTML= `I,${name}, would like to apply for an internship at your organisation.<br>My Qualification is ${qualification}.`;
          footer.innerHTML = ` Thanking you,<br>Your Sincerely<br>${name}`;
          
           
    }
        
          function validation(id)
        {
            if(arr.length>=2)
            {
                for(let i=1;i<arr.length;i++)
                 {
                    for(j=arr.length-1;j>i;j--)
                       {
                           arr[i]=arr[i].toLowerCase();
                           arr[j]=arr[j].toLowerCase();
                           if((arr[i]===arr[j])&&(arr[i]!="")&&(arr[j]!=""))
                          {
                              alert("Enter Different Hobbie");
                              document.getElementById(id).value="";
                              document.getElementById(id).focus();
                              document.getElementById(id).select();
                              addnq();
                              break;
                          }
            
                       }

                 }
            }
       }

       function display()
       {
        fetchhobbie = document.getElementById('body');

        var body1="";

        var hobbie2="";

        body1="My Hobbie is ";
        let counter=0;
          let k=0;
          let j=0;
          for(let i=0;i<arr.length;i++)
          {
              if(arr[i]!=""&&arr[i]!=undefined)
              {
                counter++;
              }
          }
          for(let i=0;i<arr.length;i++)
          {
              if(arr[i]!=""&&arr[i]!=undefined)
              {
                k=i;
                break;
              }
          }
         if(counter==1)
            {
                let id1="fh"+(k+1);
               var hobbie = document.getElementById(id1).value;
                body1 = `My Hobbie is ${hobbie}.`;
            }
            if(counter>1)
            {
                hobbie2="";
                hobbie2 = arr[k]; 
                    
                for(let i=k+1;i<arr.length;i++)
                {
                    if(arr[i]!=""&&arr[i]!=undefined)
                    {
                    hobbie2 = hobbie2+","+arr[i];
                    }
                }
                 let j = hobbie2.lastIndexOf(",");
                 hobbie2 = hobbie2.slice(0,j)+"&"+hobbie2.slice(j+1,hobbie2.length);
                
                 body1 = `My Hobbies are ${hobbie2}.`
           }

        
        fetchhobbie.innerHTML = `<p>${body1}</p><br>`
       }


       function del(deletioncounter)
       { 
         var id1 = "updatehobbie"+deletioncounter;
         var get = document.getElementById(id1);
        
         //         get.parentNode.parentNode.removeChild(get);
         var id = "fh"+deletioncounter;
         var d = document.getElementById(id);
         d.value="";
         arr[deletioncounter-1]=d.value;
            get.removeChild(d);

            var id2 = "bt"+deletioncounter;
           var j = document.getElementById(id2);
           j.style.visibility='hidden';
         get.parentNode.remove();
         display();


          


       }

       function getid(id)
       {
          var number = id.slice(2,id.length);
          additioncounter=number; 
          addhobbies(additioncounter);
       }

       function getidofelementtobedeleted(id)
       {
         var number = id.slice(2,id.length);
        var  deletioncounter=number;
         del(deletioncounter);
       }

      function addrow(additioncounter){
            var get = document.getElementById('hobbie');
            if(arr.length==0)
            additioncounter++;
            else
            {
            additioncounter=arr.length;
            additioncounter++;
            }
            var hobbiediv = document.createElement("child");
            hobbiediv.innerHTML=`<div id="updatehobbie${additioncounter}">
                    <td><input type="text" name="fh" id="fh${additioncounter}" oninput="getid(id)" onchange="validation(id)"><button id="bt${additioncounter}" onclick="getidofelementtobedeleted(id)">Delete</button></td>
                </div>  
                <br>`;
            get.appendChild(hobbiediv);
    }
    </script>
    
</body>
</html>